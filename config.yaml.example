interval: "1m"       # å·¡æ£€é—´éš”ï¼Œå¯å†™æˆ "30s"ã€"1m"ã€"5m" ç­‰
slow_latency: "5s"   # æ…¢è¯·æ±‚é˜ˆå€¼ï¼Œè¶…è¿‡åˆ™ä»ç»¿é™ä¸ºé»„

# ============================================
# å¹¶å‘æ§åˆ¶ä¸è°ƒåº¦ç­–ç•¥
# ============================================

# æœ€å¤§å¹¶å‘æ¢æµ‹æ•°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 10ï¼‰
# - ä¸é…ç½®æˆ– 0: ä½¿ç”¨é»˜è®¤å€¼ 10
# - -1: æ— é™åˆ¶ï¼Œè‡ªåŠ¨æ‰©å®¹åˆ°ç›‘æµ‹é¡¹æ•°é‡
# - >0: ç¡¬ä¸Šé™ï¼Œè¶…è¿‡æ—¶ç›‘æµ‹é¡¹ä¼šæ’é˜Ÿç­‰å¾…æ‰§è¡Œ
# å»ºè®®ï¼šæ ¹æ®ç›‘æµ‹é¡¹æ•°é‡å’ŒæœåŠ¡å™¨æ€§èƒ½è°ƒæ•´
#   - å°è§„æ¨¡ï¼ˆ<20é¡¹ï¼‰: 10-20
#   - ä¸­ç­‰è§„æ¨¡ï¼ˆ20-100é¡¹ï¼‰: 50-100
#   - å¤§è§„æ¨¡ï¼ˆ>100é¡¹ï¼‰: -1 æˆ–æ›´é«˜å€¼
max_concurrency: 15

# é”™å³°è°ƒåº¦ï¼ˆå¯é€‰ï¼Œé»˜è®¤ trueï¼‰
# å¼€å¯åä¼šå°†ç›‘æµ‹é¡¹åœ¨å·¡æ£€å‘¨æœŸå†…å‡åŒ€åˆ†æ•£ï¼Œé¿å…æµé‡çªå‘
# - true: å¯ç”¨é”™å³°ï¼ˆæ¨èï¼‰
# - false: æ‰€æœ‰ç›‘æµ‹é¡¹åŒæ—¶æ‰§è¡Œï¼ˆä»…ç”¨äºè°ƒè¯•ï¼‰
stagger_probes: true

# ============================================
# API æ€§èƒ½ä¼˜åŒ–
# ============================================

# å¹¶å‘æŸ¥è¯¢ä¼˜åŒ–ï¼ˆå¯é€‰ï¼Œé»˜è®¤ falseï¼‰
# å¯ç”¨å /api/status æ¥å£ä¼šä½¿ç”¨ goroutine å¹¶å‘æŸ¥è¯¢å¤šä¸ªç›‘æµ‹é¡¹
# âš ï¸ ä»…é€‚ç”¨äº PostgreSQLï¼ŒSQLite ä½¿ç”¨å•è¿æ¥æ— å¹¶å‘æ”¶ç›Š
# æ€§èƒ½æå‡ï¼š10 ä¸ªç›‘æµ‹é¡¹æŸ¥è¯¢æ—¶é—´ä» ~2s é™è‡³ ~300msï¼ˆ-85%ï¼‰
enable_concurrent_query: false

# å¹¶å‘æŸ¥è¯¢é™åˆ¶ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 10ï¼Œä»…å½“ enable_concurrent_query=true æ—¶ç”Ÿæ•ˆï¼‰
# é™åˆ¶åŒæ—¶æ‰§è¡Œçš„æ•°æ®åº“æŸ¥è¯¢æ•°é‡ï¼Œé˜²æ­¢è¿æ¥æ± è€—å°½
# å»ºè®®ï¼šæ ¹æ®æ•°æ®åº“è¿æ¥æ± å¤§å°è°ƒæ•´
#   - max_open_conns >= concurrent_query_limit Ã— å¹¶å‘è¯·æ±‚æ•° Ã— 1.2
#   - ç¤ºä¾‹ï¼š50 >= 10 Ã— 3 Ã— 1.2 = 36ï¼ˆå®‰å…¨ï¼‰
concurrent_query_limit: 10

# å¯ç”¨ç‡ä¸­é»„è‰²çŠ¶æ€çš„æƒé‡ï¼ˆ0-1ï¼Œé»˜è®¤ 0.7ï¼‰
# ç»¿è‰²=1.0, é»„è‰²=degraded_weight, çº¢è‰²=0.0
# å¯é€‰é…ç½®ï¼Œä¸è®¾ç½®åˆ™ä½¿ç”¨é»˜è®¤å€¼ 0.7
degraded_weight: 0.7

# ============================================
# èµåŠ©å•†ç½®é¡¶é…ç½®
# ============================================
# ç”¨äºåœ¨é¡µé¢åˆå§‹åŠ è½½æ—¶ç½®é¡¶ç¬¦åˆæ¡ä»¶çš„èµåŠ©å•†ç›‘æµ‹é¡¹
# ç”¨æˆ·ç‚¹å‡»ä»»æ„æ’åºæŒ‰é’®åç½®é¡¶å¤±æ•ˆï¼Œåˆ·æ–°é¡µé¢æ¢å¤
sponsor_pin:
  enabled: true           # æ˜¯å¦å¯ç”¨ç½®é¡¶åŠŸèƒ½ï¼ˆé»˜è®¤ trueï¼‰
  max_pinned: 3           # æœ€å¤šç½®é¡¶æ•°é‡ï¼ˆé»˜è®¤ 3ï¼‰
  min_uptime: 95.0        # æœ€ä½å¯ç”¨ç‡è¦æ±‚ï¼ˆé»˜è®¤ 95%ï¼‰
  min_level: "basic"      # æœ€ä½èµåŠ©çº§åˆ«ï¼šbasic/advanced/enterpriseï¼ˆé»˜è®¤ basicï¼‰

# ============================================
# å­˜å‚¨é…ç½®ï¼ˆæ”¯æŒ SQLite å’Œ PostgreSQLï¼‰
# ============================================
storage:
  type: "sqlite"  # å­˜å‚¨ç±»å‹ï¼š"sqlite" æˆ– "postgres"

  # SQLite é…ç½®ï¼ˆå•æœºéƒ¨ç½²æ¨èï¼‰
  sqlite:
    path: "monitor.db"  # æ•°æ®åº“æ–‡ä»¶è·¯å¾„

  # PostgreSQL é…ç½®ï¼ˆK8s/å¤šå‰¯æœ¬éƒ¨ç½²æ¨èï¼‰
  # å–æ¶ˆæ³¨é‡Šä»¥ä¸‹é…ç½®ä»¥å¯ç”¨ PostgreSQL
  # postgres:
  #   host: "localhost"
  #   port: 5432
  #   user: "monitor"
  #   password: "monitor_password"  # å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡ MONITOR_POSTGRES_PASSWORD
  #   database: "llm_monitor"
  #   sslmode: "disable"  # ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ "require"
  #   max_open_conns: 25
  #   max_idle_conns: 5
  #   conn_max_lifetime: "1h"

# ============================================
# ä¸´æ—¶ä¸‹æ¶é…ç½®ï¼ˆéšè—ä½†ç»§ç»­ç›‘æµ‹ï¼‰
# ============================================
# ç”¨äºä¸´æ—¶ä¸‹æ¶æœåŠ¡å•†ï¼ˆå¦‚å•†å®¶ä¸é…åˆæ•´æ”¹ï¼‰
# ä¸‹æ¶åï¼š
#   - è°ƒåº¦å™¨ç»§ç»­æ¢æµ‹ï¼Œå­˜å‚¨ç»“æœï¼ˆç”¨äºæ•´æ”¹è¯æ®ï¼‰
#   - API é»˜è®¤ä¸è¿”å›ï¼ˆå¯åŠ  ?include_hidden=true è°ƒè¯•ï¼‰
#   - å‰ç«¯ä¸å±•ç¤º
#   - sitemap ä¸åŒ…å«

# æ‰¹é‡ä¸‹æ¶æ•´ä¸ªæœåŠ¡å•†ï¼ˆprovider çº§åˆ«ï¼‰
# hidden_providers:
#   - provider: "é—®é¢˜å•†å®¶A"
#     reason: "æœåŠ¡è´¨é‡ä¸è¾¾æ ‡ï¼Œå¾…æ•´æ”¹"
#   - provider: "é—®é¢˜å•†å®¶B"
#     reason: "API é¢‘ç¹è¶…æ—¶ï¼Œæ²Ÿé€šæ•´æ”¹ä¸­"

# é£é™©æœåŠ¡å•†é…ç½®ï¼ˆprovider çº§åˆ«ï¼‰
# ç”¨äºæ ‡è®°å­˜åœ¨é£é™©çš„æœåŠ¡å•†ï¼Œé£é™©å¾½æ ‡ä¼šè‡ªåŠ¨æ˜¾ç¤ºåœ¨è¯¥æœåŠ¡å•†çš„æ‰€æœ‰ç›‘æµ‹é¡¹ä¸Š
# risk_providers:
#   - provider: "é£é™©å•†å®¶A"
#     risks:
#       - label: "è·‘è·¯é£é™©"                # å¿…å¡«ï¼šç®€çŸ­æ ‡ç­¾ï¼ˆé»„è‰²è­¦å‘Šä¸‰è§’ï¼‰
#         discussion_url: "https://forum.example.com/topic/123"  # å¯é€‰ï¼šè®¨è®ºé¡µé¢é“¾æ¥
#   - provider: "é£é™©å•†å®¶B"
#     risks:
#       - label: "æœåŠ¡ä¸ç¨³å®š"

# ============================================
# ç›‘æµ‹ä»»åŠ¡é…ç½®
# ============================================
monitors:
  # --- 88code ---
  - provider: "88code"
    provider_slug: "88code"  # å¯é€‰ï¼šURL slugï¼ˆç”¨äºç”ŸæˆæœåŠ¡å•†ä¸“å±é¡µé¢é“¾æ¥ /p/88codeï¼‰ï¼Œæœªé…ç½®æ—¶ä½¿ç”¨ provider å°å†™
    provider_url: "https://88code.com"  # å¯é€‰ï¼šæœåŠ¡å•†å®˜ç½‘é“¾æ¥ï¼Œå‰ç«¯å¯ç‚¹å‡»è·³è½¬
    service: "cc"
    category: "commercial"  # å¿…å¡«ï¼šå•†ä¸šç«™(commercial) æˆ– å…¬ç›Šç«™(public)
    sponsor: "å›¢é˜Ÿè‡ªæœ‰"      # å¿…å¡«ï¼šæä¾› API Key çš„èµåŠ©è€…
    sponsor_url: "https://example.com/sponsor"  # å¯é€‰ï¼šèµåŠ©è€…é“¾æ¥
    sponsor_level: "enterprise"    # å¯é€‰ï¼šèµåŠ©å•†ç­‰çº§ basic(ğŸ”»èŠ‚ç‚¹æ”¯æŒ)/advanced(â¬¢æ ¸å¿ƒæœåŠ¡å•†)/enterprise(ğŸ’ å…¨çƒä¼™ä¼´)
    channel: "vip-channel"  # ä¸šåŠ¡é€šé“æ ‡è¯†ï¼ˆå¯é€‰ï¼‰ï¼Œç”¨äºåˆ†ç±»å’Œè¿‡æ»¤
    url: "https://api.88code.com/v1/chat/completions"
    method: "POST"
    api_key: "sk-xxxxxxxx"  # å¯é€šè¿‡ç¯å¢ƒå˜é‡ MONITOR_88CODE_CC_VIP_CHANNEL_API_KEY è¦†ç›–
    # env_var_name: "MONITOR_88CODE_CC_CUSTOM_API_KEY"  # å¯é€‰ï¼šè‡ªå®šä¹‰ç¯å¢ƒå˜é‡åï¼ˆç”¨äºè§£å†³ channel åç§°å†²çªï¼‰
    headers:
      Authorization: "Bearer {{API_KEY}}"
      Content-Type: "application/json"
    body: |
      {
        "model": "claude-3-opus",
        "messages": [{"role": "user", "content": "hi"}],
        "max_tokens": 1
      }

  - provider: "88code"
    service: "cx"
    category: "public"           # å…¬ç›Šç«™
    sponsor: "ç¤¾åŒºèµåŠ©"          # ç”±ç¤¾åŒºèµåŠ©è€…æä¾›
    channel: "standard-channel"
    url: "https://api.88code.com/v1/chat/completions"
    method: "POST"
    api_key: "sk-xxxxxxxx"
    headers:
      Authorization: "Bearer {{API_KEY}}"
      Content-Type: "application/json"
    body: |
      {
        "model": "gpt-4",
        "messages": [{"role": "user", "content": "hi"}],
        "max_tokens": 1
      }
    # å¯é€‰ï¼šè¦æ±‚å“åº”ä½“åŒ…å«è¯¥å…³é”®å­—æ‰è§†ä¸ºæˆåŠŸï¼ˆè¯­ä¹‰æ ¡éªŒï¼‰
    success_contains: "hi"

  # --- DuckCoding (æ¼”ç¤ºä¸åŒçš„ Header æ ¼å¼) ---
  - provider: "duckcoding"
    service: "cc"
    category: "commercial"
    sponsor: "duckcodingå®˜æ–¹"
    channel: "vip-channel"
    url: "https://api.duckcoding.com/v1/messages"
    method: "POST"
    api_key: "sk-duck-xxxx"
    headers:
      x-api-key: "{{API_KEY}}"
      anthropic-version: "2023-06-01"
      content-type: "application/json"
    body: |
      {
        "model": "claude-3-sonnet",
        "max_tokens": 1,
        "messages": [{"role": "user", "content": "hi"}]
      }

  # --- å¼•ç”¨ data/ ç›®å½•ä¸‹ JSON çš„ç¤ºä¾‹ ---
  - provider: "demo"
    service: "codex"
    category: "public"
    sponsor: "ç¤ºä¾‹æ•°æ®"
    channel: "test-channel"
    url: "https://88code.org/openai/v1/responses"
    method: "POST"
    api_key: "sk-demo"
    headers:
      Authorization: "Bearer {{API_KEY}}"
      Content-Type: "application/json"
    body: "!include data/cx_base.json"

  # --- å•ä¸ªç›‘æµ‹é¡¹ä¸‹æ¶ç¤ºä¾‹ ---
  # - provider: "é—®é¢˜å•†å®¶"
  #   service: "cc"
  #   category: "commercial"
  #   sponsor: "xxx"
  #   hidden: true                    # ä¸´æ—¶ä¸‹æ¶ï¼ˆç»§ç»­ç›‘æµ‹ä½†ä¸å±•ç¤ºï¼‰
  #   hidden_reason: "è¯¥é€šé“ä¸´æ—¶ç»´æŠ¤"  # å¯é€‰ï¼šä¸‹æ¶åŸå› 
  #   url: "https://..."
  #   method: "POST"
  #   # ... å…¶ä»–é…ç½®
